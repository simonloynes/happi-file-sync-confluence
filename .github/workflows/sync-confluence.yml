name: Sync Documentation
on:
  workflow_dispatch:
  push:
    branches: [main]
    paths: ["docs/**", "README.md"]

jobs:
  sync-confluence:
    runs-on: ubuntu-latest
    steps:
      - uses: actions/checkout@v4

      - uses: simonloynes/happi-file-sync-confluence@v1
        with:
          file-mappings: |
            {
              "baseUrl": "https://happi-corp.atlassian.net/wiki",
              "personalAccessToken": "${{ secrets.CONFLUENCE_TOKEN }}",
              "pages": [
                {
                  "pageId": "82542596",
                  "file": "README.md",
                  "title": "happi-file-sync-confluence Documentation"
                }
              ]
            }
